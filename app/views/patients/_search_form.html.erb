<script type="text/javascript">
//<![CDATA[
Event.observe(window, 'load', function() {$('patient_birth_date').focus()}, false);
//]]>
</script>

      <fieldset style="width: 98%">
        <legend>Personalien</legend>
        <%= form_tag search_patients_path(:case_id => params[:id]), :remote => true do %>
          <table>
            <%= fields_for 'patient', @patient, :builder => Rubaidh::TabularForm::TabularFormBuilder do |f| %>
              <tr>
                <td>Geb.:</td><td><%= text_field 'patient', :birth_date, :label => "Geburtsdat.", :size => 15, :autocomplete => 'off' %></td>
		<td/><td/>
                <td>EingNr.:</td><td><%= text_field 'search', :praxistar_eingangsnr, :size => 15, :label => "Eingangsnr.", :autocomplete => 'off' %></td>
              </tr>
            <% end %>
            <% vcard_name = 'vcard'; vcard = nil %>
            <%= fields_for vcard_name, vcard, :builder => Rubaidh::TabularForm::TabularFormBuilder do |address| %>
              <tr>
                <td>Name:</td>
                <td><%= text_field 'vcard', :family_name, :size => 15, :label => "Nachname" %></td>
                <td>Vorname:</td><td><%= text_field 'vcard', :given_name, :size => 15, :label => "Vorname" %></td>
                <td>PatNr.:</td><td><%= text_field 'patient', :doctor_patient_nr, :label => "Patientennr.", :size => 15 %></td>
              </tr>
              <tr>
                <td>Strasse:</td>
                <td><%= text_field 'vcard', :street_address, :size => 15, :label => "Strasse" %></td>
                <td>PLZ/Ort:</td>
                <td><%= text_field_with_auto_complete 'vcard', :zip_locality, :label => "PLZ/Ort", :size => 23 %></td>
              </tr>
            <% end %>
          </table>
          <%= submit_tag "Suchen" %>
          <%= link_to "Neu anlegen", new_patient_path, :remote => true unless @case %>
          <%= link_to "Neu anlegen", set_new_patient_case_path(@case), :remote => true if @case %>
          <input type="reset"/>
        <% end %>
      </fieldset>
